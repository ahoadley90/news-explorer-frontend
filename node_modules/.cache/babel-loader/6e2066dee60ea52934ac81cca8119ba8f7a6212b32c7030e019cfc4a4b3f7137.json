{"ast":null,"code":"import{createUserWithEmailAndPassword,signInWithEmailAndPassword,signOut,updateProfile,setPersistence,browserLocalPersistence}from\"firebase/auth\";import{auth}from\"./firebase\";export const register=async(email,password,username)=>{try{const userCredential=await createUserWithEmailAndPassword(auth,email,password);await updateProfile(userCredential.user,{displayName:username});// Wait for the auth state to be fully updated\nreturn new Promise(resolve=>{const unsubscribe=auth.onAuthStateChanged(user=>{if(user){unsubscribe();resolve(userCredential);}});});}catch(error){console.error(\"Registration error:\",error);throw error;}};export const login=async(email,password)=>{try{console.log(\"Login function called in auth.js with email:\",email);// Set persistence to LOCAL\nawait setPersistence(auth,browserLocalPersistence);console.log(\"Attempting to sign in with Firebase...\");const userCredential=await signInWithEmailAndPassword(auth,email,password);console.log(\"Sign in successful, userCredential:\",JSON.stringify(userCredential,null,2));// Wait for the auth state to be fully updated\nreturn new Promise(resolve=>{const unsubscribe=auth.onAuthStateChanged(user=>{if(user){unsubscribe();resolve(userCredential);}});});}catch(error){console.error(\"Login error in auth.js:\",error);throw error;}};export const logout=async()=>{try{await signOut(auth);}catch(error){console.error(\"Logout error:\",error);throw error;}};","map":{"version":3,"names":["createUserWithEmailAndPassword","signInWithEmailAndPassword","signOut","updateProfile","setPersistence","browserLocalPersistence","auth","register","email","password","username","userCredential","user","displayName","Promise","resolve","unsubscribe","onAuthStateChanged","error","console","login","log","JSON","stringify","logout"],"sources":["/Users/amandahoadley/news-explorer-frontend/src/utils/auth.js"],"sourcesContent":["import {\n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword,\n  signOut,\n  updateProfile,\n  setPersistence,\n  browserLocalPersistence,\n} from \"firebase/auth\";\nimport { auth } from \"./firebase\";\n\nexport const register = async (email, password, username) => {\n  try {\n    const userCredential = await createUserWithEmailAndPassword(\n      auth,\n      email,\n      password\n    );\n    await updateProfile(userCredential.user, { displayName: username });\n\n    // Wait for the auth state to be fully updated\n    return new Promise((resolve) => {\n      const unsubscribe = auth.onAuthStateChanged((user) => {\n        if (user) {\n          unsubscribe();\n          resolve(userCredential);\n        }\n      });\n    });\n  } catch (error) {\n    console.error(\"Registration error:\", error);\n    throw error;\n  }\n};\n\nexport const login = async (email, password) => {\n  try {\n    console.log(\"Login function called in auth.js with email:\", email);\n\n    // Set persistence to LOCAL\n    await setPersistence(auth, browserLocalPersistence);\n\n    console.log(\"Attempting to sign in with Firebase...\");\n    const userCredential = await signInWithEmailAndPassword(\n      auth,\n      email,\n      password\n    );\n    console.log(\n      \"Sign in successful, userCredential:\",\n      JSON.stringify(userCredential, null, 2)\n    );\n\n    // Wait for the auth state to be fully updated\n    return new Promise((resolve) => {\n      const unsubscribe = auth.onAuthStateChanged((user) => {\n        if (user) {\n          unsubscribe();\n          resolve(userCredential);\n        }\n      });\n    });\n  } catch (error) {\n    console.error(\"Login error in auth.js:\", error);\n    throw error;\n  }\n};\n\nexport const logout = async () => {\n  try {\n    await signOut(auth);\n  } catch (error) {\n    console.error(\"Logout error:\", error);\n    throw error;\n  }\n};\n"],"mappings":"AAAA,OACEA,8BAA8B,CAC9BC,0BAA0B,CAC1BC,OAAO,CACPC,aAAa,CACbC,cAAc,CACdC,uBAAuB,KAClB,eAAe,CACtB,OAASC,IAAI,KAAQ,YAAY,CAEjC,MAAO,MAAM,CAAAC,QAAQ,CAAG,KAAAA,CAAOC,KAAK,CAAEC,QAAQ,CAAEC,QAAQ,GAAK,CAC3D,GAAI,CACF,KAAM,CAAAC,cAAc,CAAG,KAAM,CAAAX,8BAA8B,CACzDM,IAAI,CACJE,KAAK,CACLC,QACF,CAAC,CACD,KAAM,CAAAN,aAAa,CAACQ,cAAc,CAACC,IAAI,CAAE,CAAEC,WAAW,CAAEH,QAAS,CAAC,CAAC,CAEnE;AACA,MAAO,IAAI,CAAAI,OAAO,CAAEC,OAAO,EAAK,CAC9B,KAAM,CAAAC,WAAW,CAAGV,IAAI,CAACW,kBAAkB,CAAEL,IAAI,EAAK,CACpD,GAAIA,IAAI,CAAE,CACRI,WAAW,CAAC,CAAC,CACbD,OAAO,CAACJ,cAAc,CAAC,CACzB,CACF,CAAC,CAAC,CACJ,CAAC,CAAC,CACJ,CAAE,MAAOO,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,qBAAqB,CAAEA,KAAK,CAAC,CAC3C,KAAM,CAAAA,KAAK,CACb,CACF,CAAC,CAED,MAAO,MAAM,CAAAE,KAAK,CAAG,KAAAA,CAAOZ,KAAK,CAAEC,QAAQ,GAAK,CAC9C,GAAI,CACFU,OAAO,CAACE,GAAG,CAAC,8CAA8C,CAAEb,KAAK,CAAC,CAElE;AACA,KAAM,CAAAJ,cAAc,CAACE,IAAI,CAAED,uBAAuB,CAAC,CAEnDc,OAAO,CAACE,GAAG,CAAC,wCAAwC,CAAC,CACrD,KAAM,CAAAV,cAAc,CAAG,KAAM,CAAAV,0BAA0B,CACrDK,IAAI,CACJE,KAAK,CACLC,QACF,CAAC,CACDU,OAAO,CAACE,GAAG,CACT,qCAAqC,CACrCC,IAAI,CAACC,SAAS,CAACZ,cAAc,CAAE,IAAI,CAAE,CAAC,CACxC,CAAC,CAED;AACA,MAAO,IAAI,CAAAG,OAAO,CAAEC,OAAO,EAAK,CAC9B,KAAM,CAAAC,WAAW,CAAGV,IAAI,CAACW,kBAAkB,CAAEL,IAAI,EAAK,CACpD,GAAIA,IAAI,CAAE,CACRI,WAAW,CAAC,CAAC,CACbD,OAAO,CAACJ,cAAc,CAAC,CACzB,CACF,CAAC,CAAC,CACJ,CAAC,CAAC,CACJ,CAAE,MAAOO,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,CAAEA,KAAK,CAAC,CAC/C,KAAM,CAAAA,KAAK,CACb,CACF,CAAC,CAED,MAAO,MAAM,CAAAM,MAAM,CAAG,KAAAA,CAAA,GAAY,CAChC,GAAI,CACF,KAAM,CAAAtB,OAAO,CAACI,IAAI,CAAC,CACrB,CAAE,MAAOY,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,eAAe,CAAEA,KAAK,CAAC,CACrC,KAAM,CAAAA,KAAK,CACb,CACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}